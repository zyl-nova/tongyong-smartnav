<!--pages/mine-part/vehicle/vehicle.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨èƒŒæ™¯ -->
  <view class="header-bg">
    <view class="header-content">
      <text class="header-title">è½¦è¾†ç®¡ç†</text>
      <text class="header-subtitle">ç®¡ç†æ‚¨çš„ç»‘å®šè½¦è¾†</text>
    </view>
  </view>

  <view class="content-area">
    <!-- å½“å‰ç»‘å®šè½¦è¾† -->
    <view class="current-vehicle-card" wx:if="{{vehicle}}">
      <view class="card-header">
        <view class="header-left">
          <text class="card-icon">ğŸš›</text>
          <text class="card-title">å½“å‰ç»‘å®šè½¦è¾†</text>
        </view>
        <view class="edit-btn" bindtap="editVehicle">
          <text>ç¼–è¾‘</text>
        </view>
      </view>
      <view class="vehicle-display">
        <image class="vehicle-image" src="/images/mine/vehicle/vehicle.png" mode="aspectFit" />
        <view class="plate-number-large">{{vehicle.plateNumber}}</view>
        <view class="vehicle-tags">
          <view class="vehicle-tag type">{{vehicle.type}}</view>
          <view class="vehicle-tag load">è½½é‡{{vehicle.load}}</view>
          <view class="vehicle-tag danger">{{vehicle.dangerousType}}</view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-card" wx:if="{{!vehicle}}">
      <view class="empty-icon">ğŸš›</view>
      <text class="empty-text">æ‚¨è¿˜æœªç»‘å®šè½¦è¾†</text>
      <text class="empty-hint">ç»‘å®šè½¦è¾†åå¯ä½¿ç”¨æ›´å¤šåŠŸèƒ½</text>
      <button class="bind-btn-primary" bindtap="bindNewVehicle">ç«‹å³ç»‘å®š</button>
    </view>

    <!-- å†å²ç»‘å®šè½¦è¾† -->
    <view class="history-card" wx:if="{{history.length > 0}}">
      <view class="card-header">
        <view class="header-left">
          <text class="card-icon">ğŸ“‹</text>
          <text class="card-title">å†å²ç»‘å®šè½¦è¾†</text>
        </view>
        <text class="history-count">{{history.length}}è¾†</text>
      </view>
      <view class="history-list">
        <view class="history-item" wx:for="{{history}}" wx:key="plateNumber" bindtap="selectHistory" data-index="{{index}}">
          <view class="history-icon-wrap">
            <text>ğŸš—</text>
          </view>
          <view class="history-info">
            <view class="history-main">
              <text class="history-plate">{{item.plateNumber}}</text>
              <text class="history-type">{{item.type}}</text>
            </view>
            <text class="history-time">{{item.bindTime}}</text>
          </view>
          <text class="history-arrow">></text>
        </view>
      </view>
    </view>

    <!-- ç»‘å®šæ–°è½¦è¾†æŒ‰é’® -->
    <button class="add-vehicle-btn" wx:if="{{vehicle}}" bindtap="bindNewVehicle">
      <text class="btn-icon">+</text>
      <text>ç»‘å®šæ–°è½¦è¾†</text>
    </button>
  </view>
</view>
