<!--pages/message/message.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨èƒŒæ™¯ -->
  <view class="header-bg">
    <view class="header-content">
      <text class="header-title">æ¶ˆæ¯ä¸­å¿ƒ</text>
      <text class="header-subtitle">åŠæ—¶è·å–æœ€æ–°é€šçŸ¥</text>
    </view>
  </view>

  <view class="content-area">
    <!-- æ¶ˆæ¯åˆ†ç±»Tab -->
    <view class="message-tabs">
      <view class="tab-item {{currentTab === 0 ? 'active' : ''}}" bindtap="switchTab" data-tab="0">
        <text>å…¨éƒ¨</text>
        <view class="tab-badge" wx:if="{{unreadCount > 0}}">{{unreadCount}}</view>
      </view>
      <view class="tab-item {{currentTab === 1 ? 'active' : ''}}" bindtap="switchTab" data-tab="1">
        <text>ç³»ç»Ÿé€šçŸ¥</text>
      </view>
      <view class="tab-item {{currentTab === 2 ? 'active' : ''}}" bindtap="switchTab" data-tab="2">
        <text>é¢„çº¦æ¶ˆæ¯</text>
      </view>
    </view>

    <!-- æ¶ˆæ¯åˆ—è¡¨ -->
    <view class="message-list">
      <view class="message-card {{!item.read ? 'unread' : ''}}" wx:for="{{messageList}}" wx:key="id" bindtap="navigateToDetail" data-id="{{item.id}}">
        <view class="message-icon-wrap {{item.iconType || item.type}}">
          <image class="message-icon" src="{{item.icon}}" mode="aspectFit"/>
          <view class="unread-dot" wx:if="{{!item.read}}"></view>
        </view>
        <view class="message-content">
          <view class="message-header">
            <text class="message-title">{{item.title}}</text>
            <text class="message-time">{{item.time}}</text>
          </view>
          <text class="message-desc">{{item.content}}</text>
        </view>
        <view class="message-arrow">></view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-container" wx:if="{{messageList.length === 0}}">
      <view class="empty-icon">ğŸ“­</view>
      <text class="empty-text">æš‚æ— æ¶ˆæ¯</text>
      <text class="empty-hint">æ–°æ¶ˆæ¯ä¼šåœ¨è¿™é‡Œæ˜¾ç¤º</text>
    </view>
  </view>
</view>
